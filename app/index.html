<!doctype html>
<html>

<head>
  <title>Mad Science</title>
</head>

</html>
<h1>Hello World</h1>
<br />
<br />
<button id="hello">Hello</button>

<script type="module">
  import Arweave from 'https://cdn.skypack.dev/arweave';
  import { SmartWeaveWebFactory } from 'https://cdn.skypack.dev/redstone-smartweave';

  const arweave = Arweave.init({
    host: window.location.hostname,
    port: 443,
    protocol: 'https'
  })
  const smartweave = SmartWeaveWebFactory.memCachedBased(arweave).useArweaveGateway().build()

  async function hello() {

    // find contract id
    const contract = smartweave.contract(getContract())
    // set input
    // const input = {
    //   function: 'hello',
    //   name: 'Test'
    // }
    //await smartweave.interactWrite(arweave, window.wallet, contract, input)
    //await arweave.api.get('mine')

    const results = await smartweave.readState()


    console.log(results)
  }

  async function getContract() {
    return window.location.pathname.replace('/', '')
  }

  document.getElementById('hello').addEventListener('click', hello)

</script>